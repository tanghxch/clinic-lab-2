<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Clinical Pharmacy Lab 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none; }
        .active-tab { background-color: #4f46e5; color: white; }
        .inactive-tab { background-color: #e5e7eb; color: #4b5563; }
    </style>
</head>
<body class="bg-gray-50">

    <div id="login-page" class="flex items-center justify-center h-screen">
        <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg text-center">
            <h1 class="text-3xl font-bold text-gray-800">Clinical Pharmacy Lab 2</h1>
            <p class="text-gray-500">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</p>
            <div>
                <label for="instructor" class="block text-sm font-medium text-gray-700 text-left">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô</label>
                <select id="instructor-select" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm">
                    <option disabled selected value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå --</option>
                    <option>‡∏†‡∏Å.‡∏ú‡∏®.‡∏î‡∏£. ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ</option>
                    <option>‡∏†‡∏ç.‡∏£‡∏®.‡∏î‡∏£. ‡∏™‡∏°‡∏®‡∏£‡∏µ ‡∏°‡∏µ‡∏™‡∏∏‡∏Ç</option>
                    <option>‡∏†‡∏Å.‡∏≠. ‡πÄ‡∏Å‡πà‡∏á‡∏Å‡∏≤‡∏à ‡∏ä‡∏≤‡∏ç‡∏ä‡∏±‡∏¢</option>
                </select>
            </div>
            <button id="login-btn" class="w-full py-2 px-4 rounded-md shadow-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400">
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>
        </div>
    </div>

    <div id="app" class="hidden container mx-auto p-4 sm:p-6">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 id="welcome-message" class="text-xl sm:text-2xl font-bold text-gray-800"></h1>
                <p class="text-gray-600">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
            </div>
            <button id="logout-btn" class="px-4 py-2 text-sm text-red-600 border border-red-600 rounded-lg hover:bg-red-50">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>

        <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div id="goto-dis" class="cursor-pointer block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100">
                <h5 class="mb-2 text-xl font-bold tracking-tight text-gray-900">üìù ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° DIS</h5>
                <p class="font-normal text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏≤‡∏á‡∏¢‡∏≤ 4 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</p>
            </div>
             </div>

        <div id="dis-grading-page" class="hidden">
             <button id="back-to-menu" class="text-indigo-600 hover:underline mb-4 inline-block">&larr; ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
             <h2 class="text-3xl font-bold text-gray-800 mb-6">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° DIS</h2>
             <div id="student-list-container">
                </div>
        </div>
    </div>


<script>
$(document).ready(function() {
    // =================================================================
    // !! ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç !! ‡∏ô‡∏≥ URL ‡∏Ç‡∏≠‡∏á GOOGLE APPS SCRIPT ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
    // =================================================================
    const WEB_APP_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE'; 

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°-‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏¥‡∏™‡∏¥‡∏ï‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ) ---
    let currentInstructor = '';
    const students = [
        { id: '65010710001', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏§‡∏ï‡∏¥‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡πå ‡∏®‡∏£‡∏µ‡∏ä‡∏±‡∏¢‡∏°‡∏¥‡∏ô‡∏ó‡∏£‡πå' },
        { id: '65010710011', name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏Å‡∏£ ‡∏ä‡∏∏‡∏°‡∏ó‡∏≠‡∏á' },
        // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏¥‡∏™‡∏¥‡∏ï‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
        // { id: '‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏¥‡∏™‡∏¥‡∏ï', name: '‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•' },
    ];

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ---
    function showPage(pageId) {
        $('#login-page, #app, #menu-grid, #dis-grading-page').addClass('hidden');
        if (pageId === 'app') {
            $('#app, #menu-grid').removeClass('hidden');
        } else if (pageId === 'dis-grading-page'){
            $('#app, #dis-grading-page').removeClass('hidden');
        } else {
            $(`#${pageId}`).removeClass('hidden');
        }
    }

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£ Login/Logout ---
    $('#login-btn').prop('disabled', true);
    $('#instructor-select').on('change', function() {
        $('#login-btn').prop('disabled', $(this).val() === '');
    });

    $('#login-btn').on('click', function() {
        currentInstructor = $('#instructor-select').val();
        $('#welcome-message').text('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, ' + currentInstructor);
        showPage('app');
    });

    $('#logout-btn').on('click', function() {
        currentInstructor = '';
        $('#instructor-select').val('');
        showPage('login-page');
    });

    $('#goto-dis').on('click', function() {
        generateStudentCards();
        showPage('dis-grading-page');
    });

    $('#back-to-menu').on('click', function() {
        showPage('app');
    });

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å: ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô DIS ---
    function generateStudentCards() {
        const container = $('#student-list-container');
        container.empty();
        students.forEach(student => {
            const cardHtml = `
                <div id="student-<span class="math-inline">\{student\.id\}" class\="student\-card bg\-white rounded\-xl shadow\-md p\-6 mb\-6 border border\-gray\-200"\>
                <div class="flex justify-between items-center mb-4">
<div>
<h3 class="text-xl font-bold text-gray-800">{student.id} - ${student.name}</h3>
<span class="status-badge text-sm font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded-full">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</span>
</div>
</div>
<div class="border-b border-gray-200 mb-4">
<nav class="flex flex-wrap space-x-4" aria-label="Tabs">
${[1,2,3,4].map(i => <button class="tab-button ${i===1 ? 'active-tab' : 'inactive-tab'} px-3 py-2 font-medium text-sm rounded-t-lg" data-student-id="${student.id}" data-tab="${i}">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà ${i}</button>).join('')}
</nav>
</div>
        ${[1,2,3,4].map(i => `
                    <div id="tab-content-${student.id}-${i}" class="tab-content space-y-4 ${i!==1 ? 'hidden':''}" data-student-id="${student.id}">
                         <p class="text-sm text-gray-500 font-semibold">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà ${i}</p>
                         ${createCriteriaHtml(student.id, i)}
                    </div>`).join('')}

                    <div class="mt-6 pt-4 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-4">
                        <div class="flex space-x-4 sm:space-x-6 items-baseline">
                            <div class="text-center">
                                <span class="text-sm text-gray-500">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ)</span>
                                <p id="q-total-<span class="math-inline">\{student\.id\}" class\="text\-2xl font\-bold text\-indigo\-600"\>0 / 20</p\>
                                </div>
<div class="text-center">
<span class="text-sm text-gray-500">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)</span>
<p id="avg-total-{student.id}" class="text-2xl font-bold text-green-600">0.00 / 20</p>
</div>
</div>
<button class="save-student-btn w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700" data-student-id="student.id"data‚àístudent‚àíname="{student.name}">
üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏¥‡∏™‡∏¥‡∏ï‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ
</button>
</div>
</div>`;
container.append(cardHtml);
});
}
  function createCriteriaHtml(studentId, q_no) {
         const criteria = [
            '1. ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô', '2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ñ‡∏≤‡∏° ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢',
            '3. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÅ‡∏´‡∏•‡πà‡∏á‡∏™‡∏∑‡∏ö‡∏Ñ‡πâ‡∏ô', '4. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ (updated data) ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á'
        ];
        let html = '';
        criteria.forEach((text, index) => {
            html += `
            <div class="grid grid-cols-3 gap-4 items-center">
                <label class="font-medium text-gray-700 col-span-2 text-sm"><span class="math-inline">\{text\}</label\>
                <select class="score-input w-full border-gray-300 rounded-md shadow-sm" data-student-id="{studentId}" data-q-no="qno" data‚àícriteria="{index+1}">
<option value="" selected>-</option>${[0,1,2,3,4,5].map(s => <option value="${s}">${s}</option>).join('')}
</select>
</div>`;
});
return html;
}
      // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Event ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---
    $('#student-list-container').on('click', '.tab-button', function() {
        const studentId = $(this).data('student-id');
        const tabNum = $(this).data('tab');
        $(`#student-${studentId} .tab-button`).removeClass('active-tab').addClass('inactive-tab');
        $(this).removeClass('inactive-tab').addClass('active-tab');
        $(`#student-${studentId} .tab-content`).addClass('hidden');
        $(`#tab-content-<span class="math-inline">\{studentId\}\-</span>{tabNum}`).removeClass('hidden');
        updateScores(studentId);
    });

    $('#student-list-container').on('change', '.score-input', function() {
         updateScores($(this).data('student-id'));
    });
    
    function updateScores(studentId) {
        let totalAverage = 0;
        let questionsGraded = 0;

        for(let i=1; i<=4; i++) {
            let questionTotal = 0;
            let isGraded = true;
            for(let j=1; j<=4; j++) {
                const val = $(`#tab-content-<span class="math-inline">\{studentId\}\-</span>{i} select[data-criteria=${j}]`).val();
                if(val === ''){
                    isGraded = false;
                } else {
                    questionTotal += parseInt(val);
                }
            }
             if(isGraded) {
                totalAverage += questionTotal;
                questionsGraded++;
            }
        }
        
        const activeTab = $(`#student-${studentId} .active-tab`).data('tab');
        let activeQuestionTotal = 0;
         for(let j=1; j<=4; j++) {
            const val = $(`#tab-content-<span class="math-inline">\{studentId\}\-</span>{activeTab} select[data-criteria=${j}]`).val();
            if(val !== '') activeQuestionTotal += parseInt(val);
         }
        $(`#q-total-${studentId}`).text(`${activeQuestionTotal} / 20`);
        
        const finalAverage = questionsGraded > 0 ? (totalAverage / questionsGraded).toFixed(2) : '0.00';
        $(`#avg-total-${studentId}`).text(`${finalAverage} / 20`);

        const allGraded = questionsGraded === 4;
        $(`#student-${studentId} .status-badge`).text(allGraded ? '‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß' : `${questionsGraded}/4 ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°`)
            .removeClass('bg-gray-100 text-gray-600 bg-green-100 text-green-700')
            .addClass(allGraded ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600');
    }

    $('#student-list-container').on('click', '.save-student-btn', function(e) {
        e.preventDefault();
        const btn = $(this);
        const studentId = btn.data('student-id');
        const studentName = btn.data('student-name');
        
        let allScores = [];
        let allFieldsFilled = true;
        for(let i=1; i<=4; i++) {
            const qScores = { q_no: i };
            for(let j=1; j<=4; j++) {
                const val = $(`#tab-content-<span class="math-inline">\{studentId\}\-</span>{i} select[data-criteria=${j}]`).val();
                if(val === '') {
                    allFieldsFilled = false;
                    break;
                }
                qScores[`c${j}`] = parseInt(val);
            }
            if (!allFieldsFilled) break;
            allScores.push(qScores);
        }

        if (!allFieldsFilled) {
            Swal.fire('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ô‡∏¥‡∏™‡∏¥‡∏ï‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ', 'warning');
            return;
        }

        Swal.fire({
            title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å?',
            text: `‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á ${studentName} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà`,
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#16a34a', // green
            cancelButtonColor: '#d33',
            confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏•‡∏¢!',
            cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
        }).then((result) => {
            if (result.isConfirmed) {
                btn.prop('disabled', true).text('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...');
                const payload = {
                    instructor: currentInstructor, studentId: studentId, studentName: studentName, scores: allScores
                };
                fetch(WEB_APP_URL, { method: 'POST', body: JSON.stringify(payload) })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        Swal.fire('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á ${studentName} ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                        $(`#student-${studentId} .status-badge`).text('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢').removeClass('bg-gray-100').addClass('bg-blue-100 text-blue-700');
                    } else {
                        throw new Error(data.message || 'Unknown error');
                    }
                }).catch(err => {
                    Swal.fire('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ${err.message}`, 'error');
                }).finally(() => {
                     btn.prop('disabled', false).html('üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏¥‡∏™‡∏¥‡∏ï‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ');
                });
            }
        })
    });
    showPage('login-page');
});
</script>
</body>
</html>
```
